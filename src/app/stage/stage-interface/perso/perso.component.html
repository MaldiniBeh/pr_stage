<div class="row">
  <form>
    <div class="form-row">
      <div class="col-md-9"></div>
      <div class="col-md-3 " style="display: flex;justify-content: flex-end;">
        <input autocomplete="off" type="search" class="form-control rounded" placeholder='Search (ctrl + "/" to focus)'
          (input)="toto($event.target.value)" name="resarch" [(ngModel)]="filtadm">
        <span class="input-group-text border-0"><i class="fas fa-search"></i></span>
      </div>
    </div>
  </form>
</div>

<ng-template #nodata>
  <h1 style="text-align: center;" *ngIf="toggle">Aucun Personnel disponible</h1>
</ng-template>
<div style="display: flex; justify-content:flex-end">
  <button mdbBtn type="button" mdbWavesEffect color="info" (click)="test.toggle()" (click)="Ontoglebtn()">
    <i class="{{toggle? 'fas fa-plus fa-2x' : 'fas fa-minus fa-2x'}}"></i>
    {{toggle? 'Ajouter' : 'Reduit'}}
  </button></div>
<!-- <div #changeActif></div><br> -->
<div class="container-fluid">

  <div class="row">

    <form [formGroup]="getPer" (ngSubmit)="OnFormPerso()" class="" [mdbCollapse]="isCollapsed" #test="bs-collapse">
      <div class="form-row">
        <div class="form-group col-md-6 floating-label" style="margin-bottom: 50px;">
          <input class="floating-input" type="text" placeholder=" " formControlName="nom">
          <span class="highlight"></span>
          <em class="text-danger" *ngIf="!getPer.get('nom').valid && getPer.get('nom').touched">Nom invalide
          </em>
          <label>Nom</label>
        </div>
        <div class=" col-md-6 floating-label" style="margin-bottom: 50px;">
          <input class="floating-input" formControlName="prenom" type="text" placeholder=" ">
          <span class="highlight"></span>
          <em class="text-danger" *ngIf="!getPer.get('prenom').valid && getPer.get('prenom').touched">Prenom invalide
          </em>
          <label>Prenom</label>
        </div>

        <div class="form-group col-md-6 floating-label" style="margin-bottom: 50px;">
          <input class="floating-input" type="email" formControlName="insmail" placeholder=" ">
          <span class="highlight"></span>
          <em class="text-danger" *ngIf="!getPer.get('insmail').valid && getPer.get('insmail').touched">Email invalide
          </em>
          <label>Email</label>
        </div>
        <div class="form-group col-md-6 floating-label" style="margin-bottom: 50px;">
          <input class="floating-input" type="password" formControlName="mdp" placeholder=" ">
          <span class="highlight"></span>
          <em class="text-danger" *ngIf="!getPer.get('mdp').valid && getPer.get('mdp').touched">6 caractères
            minimum
          </em>
          <label>Mot de passe</label>
        </div>

      </div>

      <button mdbBtn type="submit" mdbWavesEffect color="dark" outline="true" [disabled]="!getPer.valid">
        <i class="fa font-weight-bolder fa-check m-2  fa-2x" style="cursor: pointer;"></i> <b>Enregistré</b>
      </button>
    </form>
  </div>
</div>
<div *ngIf="User?.length>0; else nodata">
  <div *ngIf="toggle">
    <h4>Liste du personnels</h4>
    <p><code>
        {{User?.length}} {{User?.length>1 ? 'personnels' : 'personnel' }}
      </code></p>

    <div class="table-responsive" [@fallIne]='state_ani'>
      <table mdbTable>
        <thead class="black white-text">
          <tr>
            <th class="border-top-0">
              #
            </th>
            <th class="border-top-0">
              Nom
            </th>
            <th class="border-top-0">
              Prenom
            </th>
            <th class="border-top-0">
              Email
            </th>
            <th class="border-top-0">
              Profession
            </th>
            <th class="border-top-0">
              Droit
            </th>
            <th class="border-top-0">
              Action
            </th>
          </tr>
        </thead>
        <tbody>
          <tr mdbTableCol *ngFor="let el of User | reash2:ngAfterContentChecked();index as i">
            <th scope="row">{{i+1}}</th>
            <td>{{el.nom.toUpperCase()}}</td>
            <td>{{el.prenom.replace(el.prenom.charAt(0), el.prenom.charAt(0).toUpperCase())}}</td>
            <td>{{el.email}}</td>
            <td>{{el.profession}}</td>
            <td>{{el.role}}</td>

            <td>
              <div style="display: flex;justify-content: space-between;">
                <i class="fa text-success font-weight-bolder fa-edit fa-2x" style="cursor: pointer;"
                  (click)="Udroit(el)"></i>
                <i class="fa text-danger font-weight-bolder fa-trash-alt fa-2x" style="cursor: pointer;"
                  (click)="delUser(el)"></i>
                <i class="fa text-primary font-weight-bolder far fa-address-card m-2 fa-2x" style="cursor: pointer;"
                  (click)="Uprofes(el)"></i>
                <div class="form-check form-switch">
                  <input class="form-check-input h4" value="{{el.id}}" type="checkbox" name="alerts" id=""
                    (change)='Oncheckact(el.id,el.actif_ina)' [checked]="el.actif_ina == 1">
                </div>


              </div>


              <!-- <i (click)="Ontoggle2(el)"
                class="{{toggle2 ? 'fas fa-toggle-on fa-2x text-success' : 'fas fa-toggle-off fa-2x text-danger '}}"></i> -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
